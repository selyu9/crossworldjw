<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>CROSSWOR(L)D + JIMMY WEESA 0226</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0d0d1a;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  min-height: 100vh;
}

#game-wrapper {
  position: relative;
  width: 100%;
  max-width: 540px;
  touch-action: manipulation;
}

#bg-image {
  width: 100%;
  display: block;
  user-select: none;
  -webkit-user-select: none;
  pointer-events: none;
}

#grid-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
}

.cell-input {
  position: absolute;
  border: none;
  outline: none;
  background: transparent;
  color: #111;
  font-family: 'Courier New', Courier, monospace;
  font-weight: 900;
  text-align: center;
  text-transform: uppercase;
  caret-color: #e040fb;
  padding: 0;
  border-radius: 0;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  cursor: text;
  font-size: 16px; /* ‚â•16px Èò≤iOSËá™Âä®Áº©Êîæ */
}

.cell-input:focus {
  background: rgba(180, 100, 255, 0.35) !important;
  outline: 2px solid #c040fb;
  z-index: 10;
}

/* ËæìÂÖ•ÂêéËÉåÊôØÂèòÁ¥´Ëâ≤ */
.cell-input.filled {
  background: rgba(160, 60, 230, 0.28);
}

.cell-input.correct {
  background: rgba(140, 40, 220, 0.55) !important;
  color: #fff;
}

.cell-input.wrong {
  background: rgba(255, 50, 50, 0.6) !important;
  color: #fff;
}

/* OKÊåâÈíÆ */
#ok-btn {
  position: absolute;
  background: linear-gradient(135deg, #e040fb, #7c4dff);
  color: #fff;
  border: 2px solid rgba(255,255,255,0.35);
  border-radius: 10px;
  font-family: 'Courier New', monospace;
  font-weight: 900;
  letter-spacing: 2px;
  cursor: pointer;
  text-transform: uppercase;
  box-shadow: 0 0 20px rgba(224,64,251,0.7);
  transition: transform 0.1s, opacity 0.3s;
  z-index: 20;
  opacity: 0.45;
}
#ok-btn:active { transform: scale(0.93); }
#ok-btn.ready {
  opacity: 1;
  animation: pulse-btn 1s ease-in-out infinite;
}
@keyframes pulse-btn {
  0%,100% { box-shadow: 0 0 20px rgba(224,64,251,0.7); }
  50%      { box-shadow: 0 0 40px rgba(224,64,251,1), 0 0 60px rgba(124,77,255,0.5); }
}

/* ÁªìÊûúÂºπÁ™ó */
#overlay-result {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  z-index: 9999;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
#overlay-result.show { display: flex; }

#result-text {
  font-family: 'Courier New', monospace;
  font-weight: 900;
  font-size: clamp(1.8rem, 8vw, 3.5rem);
  letter-spacing: 0.06em;
  text-align: center;
  padding: 0 24px;
  line-height: 1.2;
}
#result-text.perfect {
  color: #e040fb;
  animation: glow 1.5s ease-in-out infinite;
}
#result-text.wrong-ans {
  color: #ff4444;
  text-shadow: 0 0 30px #ff4444;
}
@keyframes glow {
  0%,100% { text-shadow: 0 0 40px #e040fb, 0 0 80px #7c4dff; }
  50%      { text-shadow: 0 0 80px #e040fb, 0 0 160px #7c4dff, 0 0 200px #e040fb; }
}

#result-sub {
  color: rgba(255,255,255,0.6);
  font-family: 'Courier New', monospace;
  font-size: clamp(0.7rem, 2.5vw, 1rem);
  margin-top: 20px;
  letter-spacing: 0.12em;
  text-align: center;
  padding: 0 24px;
  line-height: 2;
}
#result-tap {
  color: rgba(255,255,255,0.2);
  font-family: 'Courier New', monospace;
  font-size: 0.65rem;
  margin-top: 28px;
  letter-spacing: 0.25em;
}

canvas#confetti {
  position: fixed; inset: 0;
  pointer-events: none; z-index: 10000;
  width: 100%; height: 100%;
}
</style>
</head>
<body>

<div id="game-wrapper">
  <img id="bg-image" src="crossword.jpg" alt="CROSSWOR(L)D">
  <div id="grid-overlay"></div>
</div>

<div id="overlay-result" onclick="closeResult()">
  <div id="result-text"></div>
  <div id="result-sub"></div>
  <div id="result-tap">TAP ANYWHERE TO CLOSE</div>
</div>
<canvas id="confetti"></canvas>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ÂõæÁâáÂéüÂßãÂ∞∫ÂØ∏: 1080 √ó 1350 px
// ÂàóXÂùêÊ†á (Ê†ºÂ≠êÂ∑¶ËæπÁºò, ÂéüÂßãÂÉèÁ¥†):
const COL_X = [233, 292, 351, 410, 469, 528, 587, 646, 705, 764, 823, 882];
// Ë°åYÂùêÊ†á (Ê†ºÂ≠ê‰∏äËæπÁºò, ÂéüÂßãÂÉèÁ¥†):
const ROW_Y = [432, 490, 549, 607, 665, 724, 782, 841, 899, 957, 1016, 1074];
const IMG_W  = 1080;
const IMG_H  = 1350;
const CELL_W = 59;
const CELL_H = 58;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ÂçïËØçÂÆö‰πâÔºàÂÖ®ÈÉ®‰∫§ÂèâÁÇπÈ™åËØÅÈÄöËøáÔºåÈõ∂ÂÜ≤Á™ÅÔºâ
//
//  1 ‚Üì VIBE        col3  row0‚Üí3    (410,432)
//  2 ‚Üì SHOTGUN     col10 row0‚Üí6    (823,432)
//  3 ‚Üì JUST        col1  row1‚Üí4    (292,490)  ‚Üê DOWNÊñπÂêëÔºÅ
//  4 ‚Üì BABY        col8  row2‚Üí5    (705,549)
//  5 ‚Üí SWEETHEART  row3  col1‚Üí10   (292,607)
//  6 ‚Üì HIGHLIGHT   col6  row3‚Üí11   (587,607)
//  7 ‚Üí YOU         row5  col8‚Üí10   (705,724)
//  8 ‚Üí ALL         row7  col4‚Üí6    (469,841)
//  9 ‚Üí GOLDEN      row9  col6‚Üí11   (587,957)
// 10 ‚Üí PERFECT     row11 col0‚Üí6    (233,1074)
//
// ‰∫§ÂèâÁÇπÂÖ®ÈÉ®ÂåπÈÖç: [3,1]=S‚úì [3,3]=E‚úì [3,6]=H‚úì [3,8]=A‚úì [3,10]=T‚úì
//                 [5,8]=Y‚úì [5,10]=U‚úì [7,6]=L‚úì [9,6]=G‚úì [11,6]=T‚úì
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const WORDS = [
  { id:1,  ans:'VIBE',       dir:'down',   row:0,  col:3  },
  { id:2,  ans:'SHOTGUN',    dir:'down',   row:0,  col:10 },
  { id:3,  ans:'JUST',       dir:'down',   row:1,  col:1  }, // DOWN!
  { id:4,  ans:'BABY',       dir:'down',   row:2,  col:8  },
  { id:5,  ans:'SWEETHEART', dir:'across', row:3,  col:1  },
  { id:6,  ans:'HIGHLIGHT',  dir:'down',   row:3,  col:6  },
  { id:7,  ans:'YOU',        dir:'across', row:5,  col:8  },
  { id:8,  ans:'ALL',        dir:'across', row:7,  col:4  },
  { id:9,  ans:'GOLDEN',     dir:'across', row:9,  col:6  },
  { id:10, ans:'PERFECT',    dir:'across', row:11, col:0  },
];

// È¢ÑÂ°´Ê†ºÂ≠êÔºàÂõæÁâáÂ∑≤Âç∞Â≠óÊØçÔºåÁé©ÂÆ∂Ë∑≥ËøáÔºâ
// [r0,c10]=S  È¢òÁõÆ2È¶ñÂ≠óÊØç
// [r1,c1] =J  È¢òÁõÆ3È¶ñÂ≠óÊØç
// [r1,c3] =I  È¢òÁõÆ1Á¨¨2Â≠óÊØç (Âõæ‰∏≠Â∑≤Âç∞"I")
// [r3,c8] =A  È¢òÁõÆ4Á¨¨2Â≠óÊØç (Âõæ‰∏≠Â∑≤Âç∞"A")
const PREFILLED = new Set(['0,10', '1,1', '1,3', '3,8']);

// OKÊåâÈíÆ ‚Äî ‰∏é #HappyBirthdayJIMMY ÊñáÂ≠óË°åÂØπÈΩê (y‚âà1271 ÂéüÂßãÂÉèÁ¥†)
const OK_BTN = { x: 810, y: 1280, w: 130, h: 46 };

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const img     = document.getElementById('bg-image');
const overlay = document.getElementById('grid-overlay');
const cellMap = {};
const allInputs = [];
const wordCells = {};

function buildGrid() {
  overlay.innerHTML = '';
  Object.keys(cellMap).forEach(k => delete cellMap[k]);
  allInputs.length = 0;
  Object.keys(wordCells).forEach(k => delete wordCells[k]);

  const scX = img.clientWidth  / IMG_W;
  const scY = img.clientHeight / IMG_H;
  const cw  = CELL_W * scX;
  const ch  = CELL_H * scY;

  WORDS.forEach(word => {
    wordCells[word.id] = [];

    word.ans.split('').forEach((letter, idx) => {
      const r   = word.dir === 'down'   ? word.row + idx : word.row;
      const c   = word.dir === 'across' ? word.col + idx : word.col;
      const key = `${r},${c}`;

      // È¢ÑÂ°´Ê†ºÂ≠ê ‚Üí nullÂç†‰Ωç
      if (PREFILLED.has(key)) {
        wordCells[word.id].push(null);
        return;
      }

      // ‰∫§ÂèâÁÇπÂ§çÁî®Â∑≤Êúâinput
      if (cellMap[key]) {
        wordCells[word.id].push(cellMap[key]);
        return;
      }

      // Êñ∞Âª∫input ‚Äî Áõ¥Êé•Áî®Á≤æÁ°ÆÂÉèÁ¥†ÔºåÊó†transformÂÅèÁßª
      const px = Math.round(COL_X[c] * scX);
      const py = Math.round(ROW_Y[r] * scY);
      const pw = Math.round(cw);
      const ph = Math.round(ch);

      const input = document.createElement('input');
      input.type        = 'text';
      input.maxLength   = 1;
      input.className   = 'cell-input';
      input.dataset.answer = letter;
      input.dataset.key    = key;
      input.autocomplete   = 'off';
      input.autocorrect    = 'off';
      input.autocapitalize = 'characters';
      input.spellcheck     = false;
      input.inputMode      = 'text';

      input.style.left       = px + 'px';
      input.style.top        = py + 'px';
      input.style.width      = pw + 'px';
      input.style.height     = ph + 'px';
      input.style.fontSize   = Math.round(ph * 0.62) + 'px';
      input.style.lineHeight = ph + 'px';

      input.addEventListener('focus', () => { input.select(); });
      input.addEventListener('click', () => {
        // ÁÇπÂáªÊó∂ÂàáÊç¢ÊøÄÊ¥ªÂçïËØçÔºàÂ§öÊ¨°ÁÇπÂáªÂêå‰∏Ä‰∫§ÂèâÊ†ºÂ≠êÂèØÂú®‰∏çÂêåÊñπÂêëÈó¥ÂàáÊç¢Ôºâ
        const ctx = getCtx(input);
        if (ctx.length > 1) {
          const curIdx = ctx.findIndex(r => r.word.id === activeWordId);
          activeWordId = ctx[(curIdx + 1) % ctx.length].word.id;
        } else if (ctx.length === 1) {
          activeWordId = ctx[0].word.id;
        }
      });
      overlay.appendChild(input);
      cellMap[key] = input;
      allInputs.push(input);
      wordCells[word.id].push(input);
    });
  });

  allInputs.forEach(inp => {
    inp.addEventListener('input',   handleInput);
    inp.addEventListener('keydown', handleKeydown);
  });

  createOKBtn(scX, scY);
}

// ÂΩìÂâçÊøÄÊ¥ªÂçïËØçIDÔºà‰∫§ÂèâÊ†ºÂ≠ê‰ºòÂÖà‰ΩøÁî®Ê≠§ÂçïËØçÊñπÂêëÂØºËà™Ôºâ
let activeWordId = null;

// Êü•ÊâæinputÊâÄÂ±ûÂçïËØç‰∏ä‰∏ãÊñáÔºàË∑≥ËøánullÈ¢ÑÂ°´Ê†ºÔºâ
function getCtx(input) {
  const results = [];
  WORDS.forEach(word => {
    const nonNull = wordCells[word.id].filter(c => c !== null);
    const idx = nonNull.indexOf(input);
    if (idx !== -1) results.push({ word, cells: nonNull, idx });
  });
  // ‰ºòÂÖàËøîÂõûÂΩìÂâçÊøÄÊ¥ªÂçïËØç
  if (activeWordId !== null) {
    const preferred = results.find(r => r.word.id === activeWordId);
    if (preferred) return [preferred, ...results.filter(r => r.word.id !== activeWordId)];
  }
  return results;
}

function handleInput(e) {
  const inp = e.target;
  const raw = inp.value.toUpperCase().replace(/[^A-Z]/g, '');
  inp.value = raw ? raw[raw.length - 1] : '';

  // ËæìÂÖ•ÂêéÁ´ãÂç≥Âä†Á¥´Ëâ≤ËÉåÊôØ
  inp.classList.toggle('filled', !!inp.value);

  if (inp.value) {
    const ctx = getCtx(inp);
    if (ctx.length > 0) {
      const { word, cells, idx } = ctx[0];
      activeWordId = word.id;
      if (idx + 1 < cells.length) cells[idx + 1].focus();
    }
  }
  refreshOK();
}

function handleKeydown(e) {
  const inp = e.target;
  const ctx = getCtx(inp);
  if (!ctx.length) return;
  const { cells, idx } = ctx[0];

  if (e.key === 'Backspace' && !inp.value && idx > 0) {
    cells[idx - 1].value = '';
    cells[idx - 1].classList.remove('filled');
    cells[idx - 1].focus();
    e.preventDefault();
    refreshOK();
  }
  if ((e.key === 'ArrowRight' || e.key === 'ArrowDown') && idx + 1 < cells.length) {
    cells[idx + 1].focus(); e.preventDefault();
  }
  if ((e.key === 'ArrowLeft' || e.key === 'ArrowUp') && idx > 0) {
    cells[idx - 1].focus(); e.preventDefault();
  }
  if (e.key === 'Enter') checkAnswers();
}

function refreshOK() {
  const btn  = document.getElementById('ok-btn');
  if (!btn) return;
  const done = allInputs.every(i => i.value.trim() !== '');
  btn.style.opacity = done ? '1' : '0.45';
  btn.classList.toggle('ready', done);
}

function createOKBtn(scX, scY) {
  const btn       = document.createElement('button');
  btn.id          = 'ok-btn';
  btn.textContent = 'OK ‚úì';
  btn.style.left   = Math.round(OK_BTN.x * scX) + 'px';
  btn.style.top    = Math.round(OK_BTN.y * scY) + 'px';
  btn.style.width  = Math.round(OK_BTN.w * scX) + 'px';
  btn.style.height = Math.round(OK_BTN.h * scY) + 'px';
  btn.style.fontSize = Math.round(OK_BTN.h * scY * 0.4) + 'px';
  btn.addEventListener('click', checkAnswers);
  overlay.appendChild(btn);
}

// ‚îÄ‚îÄ‚îÄ Ê£ÄÊü•Á≠îÊ°à ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function checkAnswers() {
  let allOK = true;
  allInputs.forEach(inp => {
    const ok = inp.value.toUpperCase() === inp.dataset.answer.toUpperCase();
    inp.classList.remove('correct', 'wrong', 'filled');
    inp.classList.add(ok ? 'correct' : 'wrong');
    if (!ok) allOK = false;
  });

  const rt  = document.getElementById('result-text');
  const rs  = document.getElementById('result-sub');
  const div = document.getElementById('overlay-result');

  if (allOK) {
    rt.textContent = 'YOU ARE PERFECT';
    rt.className   = 'perfect';
    rs.innerHTML   = '‚ú¶ &nbsp; Happy Birthday JIMMY &amp; WEESA &nbsp; ‚ú¶<br>'
                   + '<span style="font-size:.85em;opacity:.4">2026 ¬∑ 02 ¬∑ 26</span>';
    launchConfetti();
  } else {
    rt.textContent = 'NOT YET...';
    rt.className   = 'wrong-ans';
    rs.textContent = 'ËøòÊúâÈîôËØØÔºåÁªßÁª≠Âä†Ê≤πÔºÅüí™';
  }
  div.classList.add('show');
}

function closeResult() {
  document.getElementById('overlay-result').classList.remove('show');
}

// ‚îÄ‚îÄ‚îÄ ÂΩ©Á∫∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function launchConfetti() {
  const cv  = document.getElementById('confetti');
  cv.width  = window.innerWidth;
  cv.height = window.innerHeight;
  const ctx = cv.getContext('2d');
  const pal = ['#e040fb','#7c4dff','#c040ff','#ff4081','#ffea00','#00e5ff','#ffffff','#ff9800'];

  const pts = Array.from({ length: 200 }, () => ({
    x: Math.random() * cv.width,
    y: -30 - Math.random() * cv.height * 0.5,
    w: Math.random() * 14 + 4,
    h: Math.random() * 6  + 2,
    c: pal[Math.floor(Math.random() * pal.length)],
    r: Math.random() * Math.PI * 2,
    vx:(Math.random() - 0.5) * 3,
    vy: Math.random() * 4 + 1.5,
    vr:(Math.random() - 0.5) * 0.18,
    a: 1,
  }));

  let f = 0;
  const draw = () => {
    ctx.clearRect(0, 0, cv.width, cv.height);
    pts.forEach(p => {
      p.x += p.vx; p.y += p.vy; p.r += p.vr;
      if (p.y > cv.height * 0.7) p.a = Math.max(0, p.a - 0.014);
      if (p.a <= 0.01) return;
      ctx.save();
      ctx.globalAlpha = p.a;
      ctx.translate(p.x, p.y);
      ctx.rotate(p.r);
      ctx.fillStyle = p.c;
      ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
      ctx.restore();
    });
    if (++f < 260) requestAnimationFrame(draw);
    else ctx.clearRect(0, 0, cv.width, cv.height);
  };
  requestAnimationFrame(draw);
}

// ‚îÄ‚îÄ‚îÄ ÂàùÂßãÂåñ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
img.addEventListener('load', buildGrid);
if (img.complete && img.naturalWidth) buildGrid();

let rTimer;
window.addEventListener('resize', () => {
  clearTimeout(rTimer);
  rTimer = setTimeout(buildGrid, 80);
});
</script>
</body>
</html>
